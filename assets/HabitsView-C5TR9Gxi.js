import{d as h,r as u,u as b,_ as y,o,c as a,a as r,t as p,b as f,F as _,e as g,f as $,g as v}from"./index-CL7nRu-y.js";const k=h({name:"HabitEntry",props:{entry:{type:Object,required:!0}},setup(e){let t=!1,i=u(e.entry.value);const l=async()=>{t=!0;const c=b(),d=`https://api.fordsdevelopment.co.uk/daily-disciplinehabit_entries/${e.entry.id}`,s=await fetch(d,{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:`Bearer ${c.accessToken}`},body:JSON.stringify({value:i.value===0?1:0})});if(s.ok){t=!1;const n=await s.json();i.value=n.value}else{t=!1;const n=await s.json();console.error(n)}};return{entry:e.entry,toggleEntry:l,loading:t,value:i}}}),m={key:0},H={key:1};function w(e,t,i,l,c,d){return e.loading?(o(),a("div",m,"Loading...")):(o(),a("div",H,[r("p",null,p(e.entry.date),1),r("p",null,p(e.value),1),r("button",{onClick:t[0]||(t[0]=(...s)=>e.toggleEntry&&e.toggleEntry(...s))},"Toggle")]))}const B=y(k,[["render",w]]),T=h({name:"Habit",props:{habit:{type:Object,required:!0}},components:{HabitEntry:B},setup(e){return{habit:e.habit}}}),j={class:"habit-wrapper"};function E(e,t,i,l,c,d){const s=f("HabitEntry");return o(),a("div",j,[r("h2",null,p(e.habit.name),1),r("p",null,p(e.habit.description),1),(o(!0),a(_,null,g(e.habit.habit_entries,n=>(o(),$(s,{key:n.id,entry:n},null,8,["entry"]))),128))])}const C=y(T,[["render",E]]),S=h({name:"HabitsView",components:{Habit:C},setup(){const e=u([]),t=u(!0),i=u(null),l=async()=>{const c=b(),s=await fetch("https://api.fordsdevelopment.co.uk/daily-disciplinehabits",{headers:{"Content-Type":"application/json",Authorization:`Bearer ${c.accessToken}`}});if(s.ok){t.value=!1;const n=await s.json();e.value=n}else{t.value=!1;const n=await s.json();i.value=n}};return v(()=>{l()}),{habits:e,loading:t,errorMessage:i}}}),A={class:"page-wrapper"},M={key:0},L={key:1},N={key:2},O={key:3},U={class:"habit-container"};function V(e,t,i,l,c,d){const s=f("Habit");return o(),a("div",A,[t[0]||(t[0]=r("h1",null,"This is the habits page",-1)),e.loading?(o(),a("div",M,"Loading...")):e.errorMessage?(o(),a("div",L,p(e.errorMessage),1)):e.habits.length===0?(o(),a("div",N,"No habits found")):(o(),a("div",O,[r("div",U,[(o(!0),a(_,null,g(e.habits,n=>(o(),$(s,{key:n.id,habit:n},null,8,["habit"]))),128))])]))])}const z=y(S,[["render",V]]);export{z as default};
