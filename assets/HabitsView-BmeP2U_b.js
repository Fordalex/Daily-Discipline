import{d as h,r as u,u as b,_ as y,o,c as r,a as l,t as p,b as f,F as _,e as g,f as v,g as $}from"./index-BhwLjVs6.js";const k=h({name:"HabitEntry",props:{entry:{type:Object,required:!0}},setup(e){let t=!1,a=u(e.entry.value);const c=async()=>{t=!0;const i=b(),d=`https://api.fordsdevelopment.co.uk/daily-disciplinehabit_entries/${e.entry.id}`,s=await fetch(d,{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:`Bearer ${i.accessToken}`},body:JSON.stringify({value:a.value===0?1:0})});if(s.ok){t=!1;const n=await s.json();a.value=n.value}else{t=!1;const n=await s.json();console.error(n)}};return{entry:e.entry,toggleEntry:c,loading:t,value:a}}}),m={key:0},H={key:1};function w(e,t,a,c,i,d){return e.loading?(o(),r("div",m,"Loading...")):(o(),r("div",H,[l("p",null,p(e.entry.date),1),l("p",null,p(e.value),1),l("button",{onClick:t[0]||(t[0]=(...s)=>e.toggleEntry&&e.toggleEntry(...s))},"Toggle")]))}const B=y(k,[["render",w]]),T=h({name:"Habit",props:{habit:{type:Object,required:!0}},components:{HabitEntry:B},setup(e){return{habit:e.habit}}}),j={class:"habit-wrapper"};function E(e,t,a,c,i,d){const s=f("HabitEntry");return o(),r("div",j,[l("h2",null,p(e.habit.name),1),l("p",null,p(e.habit.description),1),(o(!0),r(_,null,g(e.habit.habit_entries,n=>(o(),v(s,{key:n.id,entry:n},null,8,["entry"]))),128))])}const S=y(T,[["render",E]]),C=h({name:"HabitsView",components:{Habit:S},setup(){const e=u([]),t=u(!0),a=u(null),c=async()=>{const i=b(),s=await fetch("https://api.fordsdevelopment.co.uk/daily-disciplinehabits",{headers:{"Content-Type":"application/json",Authorization:`Bearer ${i.accessToken}`}});if(s.ok){t.value=!1;const n=await s.json();e.value=n}else{t.value=!1;const n=await s.json();a.value=n.error,a.value==="Access token has expired or is invalid."&&(i.$reset(),i.clearState(),localStorage.clear(),sessionStorage.clear())}};return $(()=>{c()}),{habits:e,loading:t,errorMessage:a}}}),A={class:"page-wrapper"},M={key:0},L={key:1},N={key:2},O={key:3},U={class:"habit-container"};function V(e,t,a,c,i,d){const s=f("Habit");return o(),r("div",A,[t[0]||(t[0]=l("h1",null,"This is the habits page",-1)),e.loading?(o(),r("div",M,"Loading...")):e.errorMessage?(o(),r("div",L,p(e.errorMessage),1)):e.habits.length===0?(o(),r("div",N,"No habits found")):(o(),r("div",O,[l("div",U,[(o(!0),r(_,null,g(e.habits,n=>(o(),v(s,{key:n.id,habit:n},null,8,["habit"]))),128))])]))])}const z=y(C,[["render",V]]);export{z as default};
